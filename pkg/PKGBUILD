# Maintainer: 0x42697262

pkgbase=chicken-settings
pkgname=(
	chicken-settings-base
	chicken-settings-pkgs
	chicken-settings-cachy-pkgs
	chicken-settings-desktop-hyprland
	chicken-settings-audio
	chicken-settings-fonts
	chicken-settings-nvidia
	chicken-settings-virtualization
	chicken-settings-nix
)
pkgver=2.17.8
pkgrel=0
pkgdesc="0x42697262's CachyOS system configurations and packages"
arch=('x86_64')
url=""
license=('none')
source=(
	cachyos-mirrorlist
	cachyos-v3-mirrorlist
	cachyos-v4-mirrorlist
	mirrorlist
	nix.conf
	pacman-more.conf
	pacman.conf
)
sha256sums=(
        931351e3b0856b14691cebf374b9c6f5dbd991a6a972497eefa065f8641241dd
        610b6862e6d5a55796111a989c110536ef04a33a523fde0b86374ab6f0aeda08
        a2d0c5266ea941ce0ea912fc29087c41f4dad63d06e69f59f3bd0897c4901a06
        c4ea5d9214cc85b1796c9881c8001bd840de057dc909c3bc90807576a21cf688
        ce1ac648592c5c67e5d42079b85d3f065737da16e3613a37116bdae00411499f
        998b99f40b5ad59bfe6ddd4575c40b598ab60b70547d396fcb47f885644bf313
        6429c51073ed8726466a507cd3af5c5fe57dc22002b39646e60ab6840c768a4a
)
makedepends=(
        archlinux-keyring
	cachyos-v3-mirrorlist
	cachyos-v4-mirrorlist
        cachyos-keyring 
        cachyos-mirrorlist
)


package_chicken-settings-base(){
    pkgdesc='Base system configuration'

    # base packages
    depends=(
            base
	    base-devel
	    cryptsetup 	                # luks support
	    linux-firmware
	    lvm2                        # lvm support
	    mkinitcpio 		        # modular initramfs image creation utility
    )

    # cachyos packages
    depends+=(
	    cachyos-hooks
	    cachyos-keyring
	    cachyos-mirrorlist
	    cachyos-plymouth-theme
	    cachyos-rate-mirrors
	    cachyos-settings
	    cachyos-v3-mirrorlist
	    cachyos-v4-mirrorlist
	    linux-cachyos
	    linux-cachyos-headers
    )

    # system packages
    depends+=(
	    base
	    btrfs-progs
	    paru
	    plymouth
	    networkmanager
	    wpa_supplicant
	    sudo
	    systemd-boot-manager
	    ufw
	    usbutils
	    util-linux
            chwd
            device-mapper
            diffutils
            dosfstools
            efibootmgr
            exfatprogs
            inetutils
            iptables-nft
            jfsutils
            less
            logrotate
            lsb-release
            man-db
            man-pages
	    pacman
            sysfsutils
            which
            xfsprogs
    )

    # microcode
    depends+=( amd-ucode )

    install=chicken-settings-base.install
}


package_chicken-settings-pkgs(){
    pkgdesc='chicken-settings packages and tools'

    depends=(
	    btop
	    duf
	    fastfetch
	    findutils
	    fsarchiver
	    git
	    glances
	    inxi
	    kitty
	    meld
	    mesa-utils
	    ncdu
	    neovim
	    netcat
	    nmap
	    openssh
	    perl
	    python
	    pv
	    ripgrep
	    rsync
	    sed
	    texinfo
	    udiskie
	    usb_modeswitch
	    vi
	    vim
	    wget
	    wl-clipboard
	    zathura
    )

    # packages management
    depends+=(
	    octopi
	    pacman-contrib
	    pkgfile
	    rebuild-detector
	    reflector
	    )

    # filesystem tools
    depends+=(
	    e2fsprogs
	    efitools
	    haveged
	    nfs-utils
	    nilfs-utils
	    ntp
	    smartmontools
	    unrar
	    unzip
	    xz
    )

    # power management
    depends+=(
	    cpupower
	    power-profiles-daemon
	    upower
    )

    # hardware
    depends+=(
	    dmidecode
	    dmraid
	    hdparm
	    hwdetect
	    hwinfo
	    lsscsi
	    mtools
	    sg3_utils
	    sof-firmware
	    vulkan-radeon
	    xf86-video-amdgpu
    )

    # desktop integration
    depends+=(
	    accountsservice
	    bash-completion
	    ffmpegthumbnailer
	    gst-libav
	    gst-plugin-pipewire
	    gst-plugins-bad
	    gst-plugins-ugly
	    libdvdcss
	    libgsf
	    libopenraw
	    mlocate
	    poppler-glib
	    xdg-user-dirs
	    xdg-utils
    )

    optdepends=(
      'wl-clipboard-rs: clipboard support (Rust version)'
    )
}


package_chicken-settings-cachy-pkgs() {
    pkgdesc='CachyOS PKGBUILDs'

    depends=(
	    cachyos-ananicy-rules
	    cachyos-fish-config
	    cachyos-kernel-manager
	    cachyos-packageinstaller
	    cachyos-zsh-config
    )
}

package_chicken-settings-desktop-hyprland(){
    pkgdesc='Hyprland Desktop'

    depends=(
	    bemenu
	    bemenu-wayland
	    cachy-browser
	    cachyos-hello
	    cachyos-hyprland-settings
	    cachyos-nord-gtk-theme-git
	    cachyos-wallpapers
	    capitaine-cursors
	    grimblast-git
	    hyprland
	    kvantum
	    kvantum-theme-nordic-git
	    mako
	    pamixer
	    polkit-kde-agent
	    qt5ct
	    rofi
	    rofi-emoji
	    slurp
	    swappy
	    swaybg
	    swaylock-effects-git
	    swaylock-fancy-git
	    waybar
	    wlogout
	    wob
	    wofi
	    xdg-desktop-portal-hyprland
	    xorg-xwayland
    )
}

package_chicken-settings-audio(){
    pkgdesk='Audio handling tools apps and libs'

    depends=(
	    alsa-firmware
	    alsa-plugins
	    alsa-utils
	    pavucontrol
	    pipewire-alsa
	    pipewire-pulse
	    rtkit
	    wireplumber
    )
}

package_chicken-settings-fonts(){
    pkgdesc='Fonts configuration'

    # adobe fonts
    depends=(
	    adobe-source-han-sans-cn-fonts
	    adobe-source-han-sans-jp-fonts
	    adobe-source-han-sans-kr-fonts
    )

    # noto fonts
    depends+=(
	    noto-color-emoji-fontconfig
	    noto-fonts
	    noto-fonts-cjk
	    noto-fonts-emoji
    )

    # terminal fonts
    depends+=(
	    awesome-terminal-fonts
    )

    # ttf
    depends+=(
	    ttf-bitstream-vera
	    ttf-dejavu
	    ttf-liberation
	    ttf-meslo-nerd
	    ttf-opensans
    )

    # others
    depends+=(
	    freetype2
	    cantarell-fonts
	    opendesktop-fonts
	    ttf-meslo-nerd
    )
    # from aur
    # ttf-vista-fonts
}


package_chicken-settings-nvidia(){
    pkgdesc='Nvidia graphics configuration'

    depends=(
	    lib32-mesa
	    lib32-nvidia-utils
	    lib32-opencl-nvidia
	    lib32-vulkan-radeon
	    libva-nvidia-driver
	    libva-nvidia-driver
	    linux-cachyos-nvidia-open
	    nvidia-open
	    nvidia-prime
	    nvidia-settings
	    opencl-nvidia
	    switcheroo-control
    )
}

package_chicken-settings-virtualization(){
    pkgdesc='Virtual machines and containers configuration'
    install=chicken-settings-virtualization.install

    depends=(
	    incus
    )
}

package_chicken-settings-nix(){
    pkgdesc='Nix configuration'
    install=chicken-settings-nix.install

    install -Dm0644 nix.conf "$pkgdir/etc/nix/nix.conf"
}
